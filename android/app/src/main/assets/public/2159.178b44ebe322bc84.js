"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2159],{2159:(E,f,s)=>{s.r(f),s.d(f,{RegisterPageModule:()=>k});var h=s(177),t=s(4341),i=s(5933),v=s(8986),p=s(467),b=s(4736),e=s(4438),C=s(3999),P=s(4517);let F=(()=>{var o;class l{constructor(){}convertToColorEnum(n,r){return n[r]}}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),l})();var M=s(8661);function y(o,l){1&o&&(e.j41(0,"div")(1,"p",31),e.EFF(2,"Las contrase\xf1as no coinciden"),e.k0s()())}const R=[{path:"",component:(()=>{var o;class l{constructor(n,r,a,d,m,u){this.formBuilder=n,this.dataManagement=r,this.toastController=a,this.navCtr=d,this.loadingCtrl=m,this.utilProvider=u,this.constants=b.A,this.confirmPasswordValidator=c=>c.value.password===c.value.confirmPassword?null:{mismatch:!0},this.registerForm=new t.gE({username:new t.MJ("",[t.k0.required]),email:new t.MJ("",[t.k0.required,t.k0.email]),password:new t.MJ("",[t.k0.required,t.k0.minLength(6)]),confirmPassword:new t.MJ("",[t.k0.required]),dni:new t.MJ("",[t.k0.required,this.validateDNI]),birth_date:new t.MJ("",[t.k0.required,this.minimumAgeValidator(18)]),countryCode:new t.MJ("",[t.k0.required,t.k0.minLength(1)]),phone:new t.MJ("",[t.k0.required,this.phoneNumberValidator()]),genre:new t.MJ("",t.k0.required),checkBox_CA:new t.MJ(!1,t.k0.requiredTrue)},{validators:this.confirmPasswordValidator})}ngOnInit(){console.log("register")}registerSubmit(){var n=this;return(0,p.A)(function*(){const r=yield n.loadingCtrl.create({}),a=yield n.toastController.create({duration:2e3,position:"bottom",color:"dark",buttons:[{text:"Cerrar",role:"cancel"}]});r.present(),n.registerForm.value.phone=`+${n.registerForm.value.countryCode}${n.registerForm.value.phone}`,n.dataManagement.postRegister(n.registerForm.value).then(function(){var d=(0,p.A)(function*(m){a.message="Bienvenido a AparKing, un \xfanico detalle m\xe1s",yield a.present(),n.navCtr.navigateRoot("verify-user"),r.dismiss()});return function(m){return d.apply(this,arguments)}}()).catch(function(){var d=(0,p.A)(function*(m){let u=m.error,c="";for(let j in u)c+=u[j].join(", ");a.message=c,yield a.present(),r.dismiss()});return function(m){return d.apply(this,arguments)}}())})()}validateDNI(n){const r=n.value;if(!/^[0-9]{8}[TRWAGMYFPDXBNJZSQVHLCKE]$/i.test(r))return{dniInvalid:!0};const d=r.charAt(r.length-1).toUpperCase(),m=parseInt(r,10)%23;return d!=="TRWAGMYFPDXBNJZSQVHLCKE".charAt(m)?{dniInvalid:!0}:null}minimumAgeValidator(n){return r=>{if(t.k0.required(r))return null;const a=new Date(r.value),d=new Date;return a<=new Date(d.getFullYear()-n,d.getMonth(),d.getDate())?null:{minimumAge:!0}}}phoneNumberValidator(){return n=>/^\d{9}$/.test(n.value)?null:{phoneNumber:!0}}}return(o=l).\u0275fac=function(n){return new(n||o)(e.rXU(t.ok),e.rXU(C.P),e.rXU(i.K_),e.rXU(P.q9),e.rXU(i.Xi),e.rXU(F))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-register"]],decls:70,vars:51,consts:[[2,"--background","transparent","--border-color","transparent"],["slot","start"],["defaultHref","/"],[1,"appbar"],[3,"fullscreen"],[1,"title"],[1,"body"],[3,"submit","formGroup"],[1,"input-container"],["fill","outline","placeholder","Miguel Cervantes","label-placement","floating","label","Nombre","formControlName","username","type","text",3,"autocapitalize"],[1,"error-conatiner"],[3,"field","message","error"],["fill","outline","placeholder","example@mail.com","label-placement","floating","label","Email","formControlName","email","type","email"],["fill","outline","placeholder","Escriba su contrase\xf1a","label-placement","floating","label","Contrase\xf1a","formControlName","password","type","password"],["fill","outline","placeholder","Escriba de nuevo su contrase\xf1a","label-placement","floating","label","Confirme su contrase\xf1a","formControlName","confirmPassword","type","password"],[4,"ngIf"],["fill","outline","placeholder","Escriba su DNI","label-placement","floating","label","DNI","formControlName","dni","type","text"],["fill","outline","placeholder","Escriba su fecha de nacimiento","label-placement","floating","label","Fecha de nacimiento","formControlName","birth_date","type","date"],[1,"row"],["fill","outline","placeholder","34","label-placement","floating","label","Prefijo","formControlName","countryCode","type","number",2,"width","100px"],["fill","outline","placeholder","123456789","label-placement","floating","label","N\xfamero de tel\xe9fono","formControlName","phone","type","number"],[1,"box"],["formControlName","genre","label","Seleccione g\xe9nero"],["value","M"],["value","F"],["value","O"],[1,"checkbox-row"],["formControlName","checkBox_CA"],["href","https://base-conocimiento-g11.vercel.app/docs/Planificaci\xf3n%20proyecto/pilotUsersCommitmentAgreement","target","_blank"],[1,"error-container"],["expand","full","type","submit","shape","round",3,"click","disabled"],[2,"color","red"]],template:function(n,r){if(1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title",3),e.EFF(5),e.k0s()()(),e.j41(6,"ion-content",4)(7,"p",5),e.EFF(8,"Crear una cuenta"),e.k0s(),e.j41(9,"div",6)(10,"form",7),e.bIt("submit",function(){return r.registerSubmit()}),e.j41(11,"div",8),e.nrm(12,"ion-input",9),e.j41(13,"div",10),e.nrm(14,"app-error-message",11),e.k0s()(),e.j41(15,"div",8),e.nrm(16,"ion-input",12),e.j41(17,"div",10),e.nrm(18,"app-error-message",11)(19,"app-error-message",11),e.k0s()(),e.j41(20,"div",8),e.nrm(21,"ion-input",13),e.j41(22,"div",10),e.nrm(23,"app-error-message",11)(24,"app-error-message",11),e.k0s()(),e.j41(25,"div",8),e.nrm(26,"ion-input",14),e.j41(27,"div",10),e.nrm(28,"app-error-message",11),e.DNE(29,y,3,0,"div",15),e.k0s()(),e.j41(30,"div",8),e.nrm(31,"ion-input",16),e.j41(32,"div",10),e.nrm(33,"app-error-message",11)(34,"app-error-message",11),e.k0s()(),e.j41(35,"div",8),e.nrm(36,"ion-input",17),e.j41(37,"div",10),e.nrm(38,"app-error-message",11)(39,"app-error-message",11),e.k0s()(),e.j41(40,"div",8)(41,"div",18),e.nrm(42,"ion-input",19)(43,"ion-input",20),e.k0s(),e.j41(44,"div",10),e.nrm(45,"app-error-message",11)(46,"app-error-message",11)(47,"app-error-message",11)(48,"app-error-message",11),e.k0s()(),e.j41(49,"div",8)(50,"div",21)(51,"ion-select",22)(52,"ion-select-option",23),e.EFF(53,"Hombre"),e.k0s(),e.j41(54,"ion-select-option",24),e.EFF(55,"Mujer"),e.k0s(),e.j41(56,"ion-select-option",25),e.EFF(57,"Otro"),e.k0s()()()(),e.j41(58,"div",8)(59,"div",26),e.nrm(60,"ion-checkbox",27),e.j41(61,"ion-label"),e.EFF(62," Aceptar los "),e.j41(63,"a",28),e.EFF(64,"t\xe9rminos y condiciones"),e.k0s(),e.EFF(65," de AparKing "),e.k0s(),e.j41(66,"div",29),e.nrm(67,"app-error-message",11),e.k0s()()(),e.j41(68,"ion-button",30),e.bIt("click",function(){return r.registerSubmit}),e.EFF(69,"Registrarse"),e.k0s()()()()),2&n){let a;e.R7$(5),e.JRh(r.constants.APP_NAME),e.R7$(),e.Y8G("fullscreen",!1),e.R7$(4),e.Y8G("formGroup",r.registerForm),e.R7$(2),e.Y8G("autocapitalize",!0),e.R7$(2),e.Y8G("field",r.registerForm.get("username"))("message","Debe introducir su nombre")("error","required"),e.R7$(4),e.Y8G("field",r.registerForm.get("email"))("message","El email es obligatorio")("error","required"),e.R7$(),e.Y8G("field",r.registerForm.get("email"))("message","El email no es v\xe1lido")("error","email"),e.R7$(4),e.Y8G("field",r.registerForm.get("password"))("message","La contrase\xf1a es obligatoria")("error","required"),e.R7$(),e.Y8G("field",r.registerForm.get("password"))("message","Longitud m\xednima 6 caracteres")("error","minlength"),e.R7$(4),e.Y8G("field",r.registerForm.get("confirmPassword"))("message","La confirmaci\xf3n de contrase\xf1a es obligatorio")("error","required"),e.R7$(),e.Y8G("ngIf",r.registerForm.hasError("mismatch")&&((null==(a=r.registerForm.get("confirmPassword"))?null:a.dirty)||(null==(a=r.registerForm.get("confirmPassword"))?null:a.touched))),e.R7$(4),e.Y8G("field",r.registerForm.get("dni"))("message","El dni es obligatorio")("error","required"),e.R7$(),e.Y8G("field",r.registerForm.get("dni"))("message","El dni no es v\xe1lido")("error","dniInvalid"),e.R7$(4),e.Y8G("field",r.registerForm.get("birth_date"))("message","La fecha de nacimiento es obligatoria")("error","required"),e.R7$(),e.Y8G("field",r.registerForm.get("birth_date"))("message","Debe tener m\xednimo 18 a\xf1os")("error","minimumAge"),e.R7$(6),e.Y8G("field",r.registerForm.get("phone"))("message","Debe introducir su n\xfamero de tel\xe9fono")("error","required"),e.R7$(),e.Y8G("field",r.registerForm.get("phone"))("message","N\xfamero inv\xe1lido")("error","phoneNumber"),e.R7$(),e.Y8G("field",r.registerForm.get("countryCode"))("message","Debe introducir su prefijo")("error","required"),e.R7$(),e.Y8G("field",r.registerForm.get("countryCode"))("message","Prefijo inv\xe1lido")("error","minLength"),e.R7$(19),e.Y8G("field",r.registerForm.get("checkBox_CA"))("message","Debe aceptar los t\xe9rminos y condiciones")("error","requiredTrue"),e.R7$(),e.Y8G("disabled",!r.registerForm.valid)}},dependencies:[i.Jm,i.QW,i.eY,i.W9,i.eU,i.$w,i.he,i.Nm,i.Ip,i.BC,i.ai,i.hB,i.su,i.Je,i.Gw,i.el,h.bT,t.qT,t.BC,t.cb,t.j4,t.JD,M.f],styles:[".appbar[_ngcontent-%COMP%]{font-weight:700;font-family:Lobster,sans-serif}.invalid-field[_ngcontent-%COMP%]{border-color:red}.box[_ngcontent-%COMP%]{border:2px solid #d6d6d6;width:90%;height:60px;padding:10px}.body[_ngcontent-%COMP%]{margin:0;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:0;text-align:center;width:100%;height:60%}.body[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-weight:700;text-align:start;font-size:20px;margin-bottom:5px}.body[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:300px;width:600px;margin:0;padding:0}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;justify-content:center;align-items:flex-start;margin-top:5px}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{padding:5px;width:90%}ion-content[_ngcontent-%COMP%]{justify-content:center;margin:20px 0 0;align-items:center;display:flex;flex-direction:column;padding:20px;text-align:center;width:100%;height:100%}ion-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:x-large;font-family:Times New Roman,Times,serif}form[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;align-content:center;justify-content:center;text-align:center;flex-direction:column;margin:0}form[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;padding:10px;margin:0 20px}form[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{width:90%;padding:20px;text-align:start;--padding-end: 10px;--padding-start: 10px;border:2px solid #d6d6d6}form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px;padding-top:20px;width:90%;height:50px;margin-bottom:10%}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;margin:0 20px;padding:0 5%}.error-conatiner[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;align-items:flex-start;padding-left:5%}.input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;margin:10px auto}.checkbox-container[_ngcontent-%COMP%]{flex-direction:row;align-items:center;margin-bottom:10px}ion-checkbox[_ngcontent-%COMP%]{margin-right:10px}.error-container[_ngcontent-%COMP%]{width:90%;padding-left:10px}"]}),l})()}];let w=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[v.iI.forChild(R),v.iI]}),l})();var x=s(8336);let k=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[i.bv.forRoot(),h.MD,t.YN,i.bv,w,t.YN,t.X1,x.G]}),l})()}}]);