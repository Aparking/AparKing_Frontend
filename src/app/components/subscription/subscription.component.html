<ion-header>
  <ion-toolbar>
    <ion-title>
      <h1>Planes de Suscripción</h1>
    </ion-title>
    <ion-button slot="end" style="background-color: transparent; --background: transparent" color="light"
      (click)="goMap()">
      Mapa
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="user-card-container">
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          {{ userInfo?.user?.username }}
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <h2>
          Cantidad de créditos disponibles:
          <strong>{{ userInfo?.credit?.value }}</strong>
        </h2>
        <h2>
          Tipo de plan actual: <strong>{{ userInfo?.membership?.type }}</strong>
        </h2>
      </ion-card-content>
    </ion-card>
  </div>

  <div class="plans-container">
    <ion-card>
      <ion-card-header style="display: flex; justify-content: space-between; align-items: center;">
        <ion-card-title>{{ plans[0].name }}</ion-card-title>
        <ion-badge color="success" style="font-size: large">
          {{ plans[0].price.replace("/month", " al mes") }}
        </ion-badge>
      </ion-card-header>
      <ion-card-content>
        <ul style="list-style-type: none; padding-left: 0">
          <li style="font-size: 1.4em">
            ¿Qué contiene?
          </li>
          <li style="font-size: 1.2em">
            <ion-icon name="search-circle-outline"></ion-icon> 50 créditos para
            buscar aparcamiento
          </li>
          <li style="font-size: 1.2em">
            <ion-icon name="ribbon-outline"></ion-icon> 1 garaje para alquilar
          </li>
        </ul>
        <ion-button expand="block" [disabled]="userInfo?.membership?.type === 'Gratuita'"
          (click)="selectPlan(plans[0].id)">Seleccionar</ion-button>
      </ion-card-content>
    </ion-card>
    <ion-card>
      <ion-card-header style="display: flex; justify-content: space-between; align-items: center;">
        <ion-card-title>{{ plans[1].name }}</ion-card-title>
        <ion-badge color="success" style="font-size: large">
          {{ plans[1].price.replace("/month", " al mes") }}
        </ion-badge>
      </ion-card-header>
      <ion-card-content>
        <ul style="list-style-type: none; padding-left: 0">
          <li style="font-size: 1.4em">
            ¿Qué contiene?
          </li>
          <li style="font-size: 1.2em">
            <ion-icon name="search-circle-outline"></ion-icon> 300 créditos para
            buscar aparcamiento
          </li>
          <li style="font-size: 1.2em">
            <ion-icon name="ribbon-outline"></ion-icon> 3 garajes para alquilar
          </li>
        </ul>
        <ion-button expand="block" [disabled]="userInfo?.membership?.type === 'Noble'"
          (click)="selectPlan(plans[1].id)">Seleccionar</ion-button>
      </ion-card-content>
    </ion-card>
    <ion-card>
      <ion-card-header style="display: flex; justify-content: space-between; align-items: center;">
        <ion-card-title>{{ plans[2].name }}</ion-card-title>
        <ion-badge color="success" style="font-size: large">
          {{ plans[2].price.replace("/month", " al mes") }}
        </ion-badge>
      </ion-card-header>
      <ion-card-content>
        <ul style="list-style-type: none; padding-left: 0">
          <li style="font-size: 1.4em">
            ¿Qué contiene?
          </li>
          <li style="font-size: 1.2em">
            <ion-icon name="search-circle-outline"></ion-icon> 1000 créditos
            para buscar aparcamiento
          </li>
          <li style="font-size: 1.2em">
            <ion-icon name="ribbon-outline"></ion-icon> 5 garajes para alquilar
          </li>
        </ul>
        <ion-button expand="block" [disabled]="userInfo?.membership?.type === 'King'"
          (click)="selectPlan(plans[2].id)">Seleccionar</ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <div class="plans-container">
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          Compra créditos
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <h6 style="text-align: center; font-size: 1em; color: #888888">
          (Debe realizar una compra mínima de 10 creditos)
        </h6>
        <ion-item>
          <ion-label position="floating" style="font-size: 1.2em; color: #4a4a4a">
            Introduce la cantidad</ion-label>
          <ion-input type="number" [(ngModel)]="credit" min="10" placeholder="10 o más" required
            style="font-size: 1.2em">
          </ion-input>
        </ion-item>
        <ion-button expand="full" [disabled]="credit === undefined || credit < 10"
          (click)="credit !== undefined && buyCredit(credit)">Comprar créditos</ion-button>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>