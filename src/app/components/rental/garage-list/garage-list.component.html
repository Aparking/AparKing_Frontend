<ion-grid>
  <ion-buttons>
    <ion-button
      [routerLink]="'create'"
      color="danger"
      shape="round"
      size="small"
      >Añadir garaje</ion-button
    >
    <ion-button
      (click)="openBookListModal()"
      color="success"
      shape="round"
      size="small"
      >Mis reservas</ion-button
    >
  </ion-buttons>
  <ion-row>
    <ion-col size="12" size-md="4">
      <ion-input
        [(ngModel)]="nameFilter"
        placeholder="Filtrar por nombre"
      ></ion-input>
    </ion-col>
    <ion-col size="12" size-md="4">
      <ion-input
        [(ngModel)]="priceFilter"
        placeholder="Filtrar por precio"
        type="number"
        min="0"
        max="9999"
      ></ion-input>
    </ion-col>
    <ion-col size="12" size-md="4">
      <ion-input
        [(ngModel)]="dimensionFilter"
        placeholder="Filtrar por dimensiones"
        type="number"
        min="0"
        max="9999"
      ></ion-input>
    </ion-col>
  </ion-row>

      <ion-item>
        <ion-label position="stacked">Precio Mínimo</ion-label>
        <ion-input #minPrice type="number" 
        placeholder="Introduce un precio mínimo"
        min="0.00" max="9999.99"
        [clearInput]="true"
        (input)="onMinPriceUpdated(minPrice.value)"></ion-input>
        <ion-label position="stacked">Precio Máximo</ion-label>
        <ion-input #maxPrice type="number" 
        placeholder="Introduce un precio máximo"
        min="0.00" max="9999.99"
        [clearInput]="true"
        (input)="onMaxPriceUpdated(maxPrice.value)"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Fecha inicio</ion-label>
        <ion-datetime #startDate displayFormat="DD/MM/YYYY" 
        errorText="Formato de fecha inválido: DD/MM/YYYY" 
        placeholder="Introduce una fecha inicial"
        [clearInput]="true"
        (input)="onStartDateUpdated(startDate.value)"></ion-datetime>
        <ion-label position="stacked">Fecha fin</ion-label>
        <ion-datetime #endDate displayFormat="DD/MM/YYYY" 
        errorText="Formato de fecha inválido: DD/MM/YYYY" 
        placeholder="Introduce una fecha final"
        [clearInput]="true"
        (input)="onEndDateUpdated(startDate.value)"></ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Dimensión mínima</ion-label>
        <ion-input #minDimension type="number" 
        min="0.00" max="9999.99"
        placeholder="Introduce una dimensión mínima"
        [clearInput]="true"
        (input)="onMinDimensionUpdated(minDimension.value)"></ion-input>
        <ion-label position="stacked">Dimensión máxima</ion-label>
        <ion-input #maxDimension type="number" 
        min="0.00" max="9999.99"
        placeholder="Introduce una dimensión máxima"
        [clearInput]="true"
        (input)="onMaxDimensionUpdated(maxDimension.value)"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Ciudad</ion-label>
        <ion-input #city type="text" 
        [clearInput]="true" 
        [counter]="true" maxlength="35"
        placeholder="Introduce una ciudad"
        (input)="onCityUpdated(city.value)"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">País</ion-label>
        <ion-input #country type="text" 
        [clearInput]="true" 
        [counter]="true" maxlength="35"
        placeholder="Introduce un país"
        (input)="onCountryUpdated(country.value)"></ion-input>
      </ion-item>

      <ion-button expand="block" (click)="resetFilters()">Limpiar Filtros</ion-button>

    </ion-card-content>
  </ion-card>

  <ion-row *ngFor="let garage of dataGarage$ | async">
      <ion-card>
        <img alt="Imagen del garaje" src="https://ionicframework.com/docs/img/demos/card-media.png"/>
        <ion-card-header>
          <ion-card-title>{{ garage.name }}</ion-card-title>
          <ion-card-subtitle>{{ garage.description }}</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <p>Dimensiones: {{ garage.height }} x {{ garage.width }} x {{ garage.length }}</p>
          <p>Precio: {{ garage.price }}</p>
          <p>Día de subida: {{ garage.creation_date }}</p>
          <ion-button [routerLink]="garage.id.toString()" color="secondary" shape="round" size="small">Ver detalles</ion-button>
        </ion-card-content>
      </ion-card>
  </ion-row>

  <ion-infinite-scroll>
    <ion-infinite-scroll-content 
    loadingText="Por favor espere..." 
    loadingSpinner="bubbles">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-grid>
