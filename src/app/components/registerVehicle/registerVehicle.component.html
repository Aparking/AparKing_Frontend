<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-title>Registrar vehículo</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-card-title>Datos del vehículo</ion-card-title>
      <form [formGroup]="registerForm" (submit)="registerSubmit()">
        <ion-item class="form-item">
          <ion-label position="floating">Matricula</ion-label>
          <ion-input placeholder="1234 ABC" formControlName="carModel" type="text" [autocapitalize]="true"></ion-input>
        </ion-item>
        <app-error-message [field]="registerForm.get('carModel')"
          [message]="'Debe introducir la matricula del vehiculo'" [error]="'required'"></app-error-message>

        <ion-item class="item">
          <ion-label position="floating">Color</ion-label>
          <ion-select formControlName="color">
            <ion-select-option value="rojo">Rojo</ion-select-option>
            <ion-select-option value="verde">Verde</ion-select-option>
            <ion-select-option value="azul">Azul</ion-select-option>
            <ion-select-option value="amarillo">Amarillo</ion-select-option>
            <ion-select-option value="naranja">Naranja</ion-select-option>
            <ion-select-option value="violeta">Violeta</ion-select-option>
            <ion-select-option value="rosa">Rosa</ion-select-option>
            <ion-select-option value="blanco">Blanco</ion-select-option>
            <ion-select-option value="negro">Negro</ion-select-option>
            <ion-select-option value="gris">Gris</ion-select-option>
          </ion-select>
        </ion-item>
        <app-error-message [field]="registerForm.get('color')" [message]="'El color es obligatorio'"
          [error]="'required'"></app-error-message>

        <ion-item>
          <ion-label position="floating">Altura</ion-label>
          <ion-input placeholder="En metros" formControlName="height" type="number" step="0.01"></ion-input>
        </ion-item>
        <app-error-message [field]="registerForm.get('height')" [message]="'La altura del coche es obligatoria'"
          [error]="'required'"></app-error-message>

        <ion-item>
          <ion-label position="floating">Anchura</ion-label>
          <ion-input placeholder="En metros" formControlName="width" type="number" step="0.01"></ion-input>
        </ion-item>
        <app-error-message [field]="registerForm.get('width')" [message]="'La anchura del coche es obligatoria'"
          [error]="'required'"></app-error-message>

        <ion-item>
          <ion-label position="floating">Longitud</ion-label>
          <ion-input placeholder="En metros" formControlName="length" type="number" step="0.01"></ion-input>
        </ion-item>
        <app-error-message [field]="registerForm.get('length')" [message]="'El largo del coche es obligatorio'"
          [error]="'required'"></app-error-message>
        <app-error-message [field]="registerForm.get('length')" [message]="'El largo no puede ser negativo'"
          [error]="'min'"></app-error-message>
        <ion-button expand="full" type="submit" [disabled]="!registerForm.valid" shape="round" color="success">
          Registrar
        </ion-button>
      </form>
    </ion-card-content>
  </ion-card>

  <ion-list>
    <ion-card *ngFor="let item of vehicle; let i = index">
      <ion-card-header>
        <ion-card-title>Matricula coche: {{item.carModel}}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        Color: {{item.color}} <br>
        Tamaño: {{item.height}} <br>
        Ancho: {{item.width}} <br>
        Longitud: {{item.length}} <br>
        <ion-card-content>
          <ion-button *ngIf="item.principalCar !== true" slot="end" [disabled]="item.principalCar"
            style="background-color: transparent; --background: transparent;" color="light"
            (click)="item.id ? updateVehiculoPrincipal(item.id) : null">
            Convertir en coche principal
          </ion-button>

        </ion-card-content>
      </ion-card-content>
    </ion-card>
  </ion-list>
</ion-content>