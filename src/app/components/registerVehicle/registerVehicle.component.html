<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-title>Registrar vehículo</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-card-title>Registrar vehículo</ion-card-title>
      <form [formGroup]="registerForm" (submit)="registerSubmit()">
        <ion-item>
          <ion-label position="floating">Matricula</ion-label>
          <ion-input placeholder="1234 ABC" formControlName="carModel" type="text" [autocapitalize]="true"></ion-input>
        </ion-item>
        <app-error-message [field]="registerForm.get('carModel')!"
          [message]="'Debe introducir la matricula del vehiculo'" [error]="'required'"></app-error-message>

        <ion-item>
          <ion-label position="floating">Color</ion-label>
          <ion-input placeholder="Azul" formControlName="color" type="text"></ion-input>
        </ion-item>
        <app-error-message [field]="registerForm.get('color')!" [message]="'El color es obligatorio'"
          [error]="'required'"></app-error-message>

        <ion-item>
          <ion-label position="floating">Altura</ion-label>
          <ion-input placeholder="En metros" formControlName="height" type="number" step="0.01"></ion-input>
        </ion-item>
        <app-error-message [field]="registerForm.get('height')!" [message]="'La altura del coche es obligatoria'"
          [error]="'required'"></app-error-message>

        <ion-item>
          <ion-label position="floating">Anchura</ion-label>
          <ion-input placeholder="En metros" formControlName="width" type="number" step="0.01"></ion-input>
        </ion-item>
        <app-error-message [field]="registerForm.get('width')!" [message]="'La anchura del coche es obligatoria'"
          [error]="'required'"></app-error-message>

        <ion-item>
          <ion-label position="floating">Largo</ion-label>
          <ion-input placeholder="En metros" formControlName="length" type="number" step="0.01"></ion-input>
        </ion-item>
        <app-error-message [field]="registerForm.get('length')!" [message]="'El largo del coche es obligatorio'"
          [error]="'required'"></app-error-message>

        <ion-item>
          <ion-button expand="full" type="submit" [disabled]="!registerForm.valid" shape="round" color="success">
            Registrar
          </ion-button>
        </ion-item>
      </form>
    </ion-card-content>
  </ion-card>

  <ion-list>
    <ion-card *ngFor="let item of vehicle; let i = index">
      <ion-card-header>
        <ion-card-title>Matricula coche: {{item.carModel}}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>Color: {{item.color}}</p>
        <p>Tamaño: {{item.height}}</p>
        <p>Ancho: {{item.width}}</p>
        <p>Longitud: {{item.length}}</p>
        <ion-button *ngIf="item.principalCar !== true" slot="end" [disabled]="item.principalCar"
          class="transparent-button" color="success"
          (click)="item.id !== undefined ? updateVehiculoPrincipal(item.id) : null">
          Convertir en coche principal
        </ion-button>
      </ion-card-content>
    </ion-card>
  </ion-list>
</ion-content>