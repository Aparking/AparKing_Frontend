<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col>
        <form *ngIf="!submitted">
          <ion-item>
            <ion-label position="stacked">Nombre de usuario</ion-label>
            <ion-input type="text" [(ngModel)]="user.username" #username="ngModel" required name="username"></ion-input>
            <ion-label *ngIf="username.invalid && username.touched" color="danger">Nombre de usuario requerido</ion-label>
            <ion-label *ngIf="!isUsernameUnique()" color="danger">En uso</ion-label>
          </ion-item>

          <ion-item>
            <ion-label position="stacked">Email</ion-label>
            <ion-input type="email" [(ngModel)]="user.email" #email="ngModel" name="email" required email></ion-input>
            <ion-label *ngIf="email.invalid && email.touched" color="danger">Email requerido/inválido</ion-label>
            <ion-label *ngIf="!isEmailUnique()" color="danger">En uso</ion-label>
          </ion-item>

          <ion-item>
            <ion-label position="stacked">DNI</ion-label>
            <ion-input type="text" [(ngModel)]="user.dni" #dni="ngModel" name="dni" required pattern="[0-9]{8}[A-Za-z]{1}"></ion-input>
            <ion-label *ngIf="dni.invalid && dni.touched" color="danger">DNI requerido/inválido</ion-label>
            <ion-label *ngIf="!isDniUnique()" color="danger">En uso</ion-label>
          </ion-item>

          <ion-item>
            <ion-label position="stacked">Fecha de nacimiento</ion-label>
            <ion-input type="date" [(ngModel)]="user.birth_date" #birth_date="ngModel" required name="birth_date"></ion-input>
            <ion-label *ngIf="birth_date.invalid" color="danger">Fecha de nacimiento requerida</ion-label>
          </ion-item>

          <ion-item>
            <ion-label position="stacked">Género</ion-label>
            <ion-select [(ngModel)]="user.gender" name="gender">
              <ion-select-option value="MALE">MALE</ion-select-option>
              <ion-select-option value="FEMALE">FEMALE</ion-select-option>
              <ion-select-option value="OTHER">OTHER</ion-select-option>
            </ion-select>
          </ion-item>

          <ion-item>
            <ion-label position="stacked">Foto</ion-label>
            <ion-input type="text" [(ngModel)]="user.photo" #photo="ngModel" name="photo" pattern="https?://.+"></ion-input>
            <ion-label *ngIf="photo.invalid && photo.touched" color="danger">URL inválida</ion-label>
          </ion-item>

          <ion-item>
            <ion-label position="stacked">Teléfono</ion-label>
            <ion-input type="text" [(ngModel)]="user.phone" #phone="ngModel" name="phone" required pattern="^\+34[0-9]{9}$"></ion-input>
            <ion-label *ngIf="phone.invalid && phone.touched" color="danger">Teléfono inválido</ion-label>
          </ion-item>

          <ion-item>
            <ion-label position="stacked">Contraseña</ion-label>
            <ion-input type="password" [(ngModel)]="user.password" #password="ngModel" required name="password"></ion-input>
            <ion-label *ngIf="password.invalid" color="danger">Contraseña requerida</ion-label>
          </ion-item>

          <ion-item>
            <ion-label position="stacked">Es personal</ion-label>
            <ion-checkbox [(ngModel)]="user.is_staff" name="is_staff"></ion-checkbox>
          </ion-item>


          <ion-button (click)="saveUser()">Confirmar</ion-button>
        </form>

        <div *ngIf="submitted">
          <ion-label>¡Creado exitosamente!</ion-label>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
